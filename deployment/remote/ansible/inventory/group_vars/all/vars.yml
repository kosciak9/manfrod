---
# Non-secret configuration variables for Manfrod deployment

# =============================================================================
# System Configuration
# =============================================================================

hostname: lissandra
timezone: Europe/Warsaw
locale: en_US.UTF-8

# =============================================================================
# Users
# =============================================================================

# Admin user (you) - SSH key authentication only
admin_user: kosciak
admin_ssh_pubkey: "{{ lookup('file', '~/.ssh/id_ed25519.pub') }}"

# Application user (bot) - password auth, no SSH, full sudo
app_user: manfrod

# =============================================================================
# Base Packages
# =============================================================================

base_packages:
  - base-devel
  - git
  - vim
  - htop
  - tmux
  - curl
  - wget
  - rsync
  - unzip
  - python
  - python-pip
  - erlang
  - elixir

# =============================================================================
# Container Runtime
# =============================================================================

podman_packages:
  - podman
  - buildah
  - skopeo
  - cni-plugins
  - slirp4netns
  - fuse-overlayfs

# =============================================================================
# ParadeDB Configuration
# =============================================================================

# Using the same version as local development (v0.21.5, pg18)
# Tag reference for multi-arch support (ARM64 + AMD64)
paradedb_image: docker.io/paradedb/paradedb:v0.21.5-pg18
paradedb_container_name: manfrod-db
paradedb_volume_name: manfrod_postgres_data

# Database configuration
postgres_user: manfrod
postgres_db: manfrod_prod
postgres_port: 5432

# =============================================================================
# Manfrod Application
# =============================================================================

app_dir: /home/manfrod/agent
app_port: 4000

# =============================================================================
# Git Configuration
# =============================================================================

# Public GitHub repository (HTTPS for read-only access)
git_repo_url: https://github.com/kosciak9/manfrod.git
git_branch: main
git_local_branch: local-customizations

# =============================================================================
# Tailscale Configuration
# =============================================================================

# Enable Tailscale SSH (allows SSH over Tailscale without managing keys)
tailscale_args: "--ssh"

# Accept DNS from Tailscale (for MagicDNS)
tailscale_accept_dns: true

# =============================================================================
# Firewall Configuration
# =============================================================================

# Ports to open on the local network (Tailscale handles its own firewall)
# PostgreSQL only accessible via localhost/Tailscale, not exposed to LAN
firewall_open_ports:
  - 22/tcp  # SSH (for bootstrap, can be removed after Tailscale SSH works)
